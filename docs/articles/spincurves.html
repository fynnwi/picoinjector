<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="masterthesis">
<title>Spincurve Analysis • masterthesis</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spincurve Analysis">
<meta property="og:description" content="masterthesis">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">masterthesis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/droplet_volumes.html">Volume Estimates</a>
    <a class="dropdown-item" href="../articles/hydraulic_resistance.html">Hydraulic resistance</a>
    <a class="dropdown-item" href="../articles/spincurves.html">Spincurve Analysis</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Spincurve Analysis</h1>
            
      
      
      <div class="d-none name"><code>spincurves.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>For my microfluidic chips, channel heights in the range of 20-30 µm
are desired. To obtain these heights during the photolithography
process, a photoresist with suitable viscosity is required. <img src="images/001_su8_3000_spincurves.png" style="width:50.0%" alt="SU-8 3000 thickness"></p>
<p>These are the spin curves for the SU-8 3000 series <span class="citation">(<span>“<span>SU</span>-8 3000 for Microstructure
Fabrication <span></span> Kayaku Advanced Materials. Kayaku Advanced
Materials, Inc.”</span> n.d.)</span>. It seems like SU-8 3035 can yield
thicknesses in the desired range (extrapolating for higher RPMs, and
from the experience that at 6000 RPM 30 µm thickness can be achieved
with SU-8 3050). Therefore, 115.2 g SU-8 3050 was mixed with 1.42 g of
thinner solution, in order to obtain a custom dilution that mimics the
behaviour of SU-8 3035. In the following, SU-8 3035 refers to this
custom dilution.</p>
<p>After preparation of SU-8 3035, a spin curve analysis was conducted
to characterize the relation between spin speed and film thickness of
the custom photoresist. To that end, a cross pattern (see image) was
exposed on cleaned and re-used silicon wafers, after spin-coating SU-8
3035 at 3000, 4000, and 5000 RPM, respectively. For each of these RPM,
three chips were prepared: two chips using a spin duration of 30s (to
have duplicate measurements), and one chip using a spin duration of 60
s. Therefore, in total, nine wafers were prepared.</p>
<p><img src="images/004_spincurve_cross_pattern_traces.png" style="width:50.0%" alt="Spincurve cross pattern"><img src="images/003_spincurve_cross_pattern_zoom.png" style="width:50.0%" alt="Spincurve cross pattern"></p>
<p>After photolithography, the resulting height profiles were measured
using a Dektak profilometer. Unfortunately, when measuring over long
distances with this machine, measurements are drifting away from the
reference level quite significantly, which necessitates a correction
before data evalutation. Therefore, the cross structure exposed on the
wafer includes repeated gaps in order to pick up the zero-level along
the entire wafer.</p>
<p>For each wafer, four traces were measured: top-to-bottom,
left-to-right, bottom-to-top, and right-to-left (see figure). This
results in duplicate measurements for all the structures.</p>
<p>In this vignette, the post-processing and drift correction of the
Dektak data will be carried out. This includes:</p>
<ul>
<li>reading in CSV files,</li>
<li>recognition of the reference level segments,</li>
<li>drift correction,</li>
<li>averaging of duplicate measurements,</li>
<li>interpolation of height profiles between the gaps in the
structure.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">masterthesis</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="co"># library(tidyr)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-loading">data loading<a class="anchor" aria-label="anchor" href="#data-loading"></a>
</h2>
<p>Get file names:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="st">"data/spincurve_csv/"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">files</span><span class="op">)</span>
<span class="co">#&gt; [1] "data/spincurve_csv//00_job9945_eastwest.csv"  </span>
<span class="co">#&gt; [2] "data/spincurve_csv//01_job9945_northsouth.csv"</span>
<span class="co">#&gt; [3] "data/spincurve_csv//01_job9945_westeast.csv"  </span>
<span class="co">#&gt; [4] "data/spincurve_csv//02_job9946_southnorth.csv"</span>
<span class="co">#&gt; [5] "data/spincurve_csv//03_job9945_southnorth.csv"</span>
<span class="co">#&gt; [6] "data/spincurve_csv//03_job9950_northsouth.csv"</span></code></pre></div>
<p>Read in all the csv files and concatenate them into a single tibble
dataframe:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">f</span> <span class="kw">in</span> <span class="va">files</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">f</span>, skip <span class="op">=</span> <span class="fl">19</span>, show_col_types <span class="op">=</span> <span class="cn">FALSE</span>, col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"position"</span>, <span class="st">"height"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">position</span>, <span class="va">height</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">)</span> <span class="co"># add the wafer id</span>
  <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">results</span>, <span class="va">d</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">results</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,815,001 × 3</span></span>
<span class="co">#&gt;    position height id                     </span>
<span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      0     1.85 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      0.5   1.22 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      1     0.59 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      1.5   0    00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2    -<span style="color: #BB0000;">0.51</span> 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2.5  -<span style="color: #BB0000;">0.95</span> 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      3    -<span style="color: #BB0000;">1.32</span> 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      3.5  -<span style="color: #BB0000;">1.63</span> 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      4    -<span style="color: #BB0000;">1.88</span> 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      4.5  -<span style="color: #BB0000;">2.08</span> 00_job9945_eastwest.csv</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 2,814,991 more rows</span></span></code></pre></div>
<p>Add information about spin speed and duration:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># table relating wafer id with RPM</span>
<span class="va">rpm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>job9945 <span class="op">=</span> <span class="fl">3000</span>, job9946 <span class="op">=</span> <span class="fl">3000</span>, job9947 <span class="op">=</span> <span class="fl">4000</span>, job9948 <span class="op">=</span> <span class="fl">4000</span>,
         job9949 <span class="op">=</span> <span class="fl">5000</span>, job9950 <span class="op">=</span> <span class="fl">5000</span>, job10053 <span class="op">=</span> <span class="fl">4000</span>, job10054 <span class="op">=</span> <span class="fl">5000</span>, job10055 <span class="op">=</span> <span class="fl">3000</span><span class="op">)</span>

<span class="co"># table relating wafer id with seconds at max RPM</span>
<span class="va">spinTime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>job9945 <span class="op">=</span> <span class="fl">30</span>, job9946 <span class="op">=</span> <span class="fl">30</span>, job9947 <span class="op">=</span> <span class="fl">30</span>, job9948 <span class="op">=</span> <span class="fl">30</span>,
         job9949 <span class="op">=</span> <span class="fl">30</span>, job9950 <span class="op">=</span> <span class="fl">30</span>, job10053 <span class="op">=</span> <span class="fl">60</span>, job10054 <span class="op">=</span> <span class="fl">60</span>, job10055 <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>wafer <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">id</span>, <span class="st">"job\\d+"</span><span class="op">)</span>,
         direction <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">id</span>, <span class="st">"[a-z]+\\."</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
           <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove</a></span><span class="op">(</span><span class="st">"\\."</span><span class="op">)</span>,
         orientation <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">direction</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"eastwest"</span>, <span class="st">"westeast"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"horizontal"</span>,
                                 <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"vertical"</span><span class="op">)</span>,
         rpm <span class="op">=</span> <span class="va">rpm</span><span class="op">[</span><span class="va">wafer</span><span class="op">]</span>,
         spintime <span class="op">=</span> <span class="va">spinTime</span><span class="op">[</span><span class="va">wafer</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># order rows by wafer, direction and position</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">rpm</span>, <span class="va">spintime</span>, <span class="va">direction</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">rpm</span>, <span class="va">spintime</span>, .by_group <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">results</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,815,001 × 8</span></span>
<span class="co">#&gt;    position height id                 wafer direction orientation   rpm spintime</span>
<span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      0     1.85 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      0.5   1.22 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      1     0.59 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      1.5   0    00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2    -<span style="color: #BB0000;">0.51</span> 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2.5  -<span style="color: #BB0000;">0.95</span> 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      3    -<span style="color: #BB0000;">1.32</span> 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      3.5  -<span style="color: #BB0000;">1.63</span> 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      4    -<span style="color: #BB0000;">1.88</span> 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      4.5  -<span style="color: #BB0000;">2.08</span> 00_job9945_eastwe… job9… eastwest  horizontal   <span style="text-decoration: underline;">3</span>000       30</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 2,814,991 more rows</span></span></code></pre></div>
<p>The raw data looks like this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># filter for single trace</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="st">"00_job9945_eastwest.csv"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/plot_heightprofile.html">plot_heightprofile</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="spincurves_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Now I use the geometrical information of my design to determine peaks
and valleys in the trace. First, I find the positions (x coordinate) of
the leftmost and rightmost structure using the slope of the graph, and
then I rescale everything so that it spans the known width of 40.5 mm
that was written on the wafer. The rescaling is necessary in case the
trace was not perfectly aligned with the structure, i.e. slightly
diagonal and therefore a little bit longer.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="co"># filter for single trace</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="st">"00_job9945_eastwest.csv"</span>, 
         <span class="va">position</span> <span class="op">&lt;</span> <span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># zoom at left-most peak</span>
  <span class="fu"><a href="../reference/plot_heightprofile.html">plot_heightprofile</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="spincurves_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>To find the x coordinate were the first structure begins, I calculate
the first derivative (lagged differences) in order to identify regions
with high slope. The first derivative of above graph then looks like
this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># subset the data</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="st">"00_job9945_eastwest.csv"</span>,
         <span class="va">position</span> <span class="op">&lt;</span> <span class="fl">1000</span><span class="op">)</span>
<span class="co"># lagged differences parameters</span>
<span class="va">lag</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="va">dif</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">offset</span> <span class="op">&lt;-</span> <span class="va">dif</span> <span class="op">*</span> <span class="va">lag</span>
<span class="va">dHeight</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">height</span>, lag <span class="op">=</span> <span class="va">lag</span>, differences <span class="op">=</span> <span class="va">dif</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">position</span>, lag <span class="op">=</span> <span class="va">lag</span>, differences <span class="op">=</span> <span class="va">dif</span><span class="op">)</span>
<span class="co"># adjust dimension of x axis (lagging difference removes the first l elements):</span>
<span class="va">pos</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">$</span><span class="va">position</span><span class="op">[</span><span class="op">(</span><span class="va">offset</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">position</span><span class="op">)</span><span class="op">]</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">pos</span>, <span class="va">dHeight</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pos</span>, y <span class="op">=</span> <span class="va">dHeight</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co"># geom_point(shape = 23)  +</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Derivative of height profile"</span>,
       subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Lag ="</span>, <span class="va">lag</span>, <span class="st">", difference order ="</span>, <span class="va">dif</span><span class="op">)</span>,
       x <span class="op">=</span> <span class="st">"Lateral position [µm]"</span>,
       y <span class="op">=</span> <span class="st">"Lagged difference magnitude"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/theme_pretty.html">theme_pretty</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="spincurves_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">references<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-noauthor_su-8_nodate" class="csl-entry">
<span>“<span>SU</span>-8 3000 for Microstructure Fabrication
<span></span> Kayaku Advanced Materials. Kayaku Advanced Materials,
Inc.”</span> n.d. Accessed May 17, 2022. <a href="https://kayakuam.com/products/su-8-3000/" class="external-link">https://kayakuam.com/products/su-8-3000/</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Fynn Withake.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
